"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[349],{61575:function(p,c,t){t.d(c,{r:function(){return d}});var e=t(74512),n=t(77981),a=t(74506),m=t.n(a);function T(i,u,f){if(!i||!u||!f)return{display:"none"};const{x:o,y:s}=f;return{transform:`translate(${o}px, ${s}px)`}}const d=({renderItem:i})=>{const{itemType:u,isDragging:f,item:o,initialOffset:s,currentOffset:r,mouseOffset:O}=(0,a.useDragLayer)(E=>({item:E.getItem(),itemType:E.getItemType(),initialOffset:E.getInitialSourceClientOffset(),currentOffset:E.getSourceClientOffset(),isDragging:E.isDragging(),mouseOffset:E.getClientOffset()}));return f?(0,e.jsx)(n.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%",children:(0,e.jsx)(n.x,{style:T(s,r,O),children:i({type:u,item:o})})}):null}},80006:function(p,c,t){t.d(c,{G:function(){return T}});var e=t(32735),n=t(96192),a=t(59177),m=t(20108);function T(){const{get:d}=(0,n.kY)(),{formatAPIError:i}=(0,n.So)(),u=(0,n.lm)(),f=(0,m.useQueries)([{queryKey:["content-manager","components"],async queryFn(){const{data:{data:l}}=await d("/content-manager/components");return l},onError(l){l instanceof a.d7&&u({type:"warning",message:i(l)})}},{queryKey:["content-manager","content-types"],async queryFn(){const{data:{data:l}}=await d("/content-manager/content-types");return l},onError(l){l instanceof a.d7&&u({type:"warning",message:i(l)})}}]),[o,s]=f,r=o.isLoading||s.isLoading,O=e.useMemo(()=>(s?.data??[]).filter(l=>l.kind==="collectionType"&&l.isDisplayed),[s?.data]),E=e.useMemo(()=>(s?.data??[]).filter(l=>l.kind!=="collectionType"&&l.isDisplayed),[s?.data]);return{isLoading:r,components:e.useMemo(()=>o?.data??[],[o?.data]),collectionTypes:O,singleTypes:E}}},98866:function(p,c,t){t.d(c,{q:function(){return m}});var e=t(32735),n=t(96192),a=t(20108);function m({enabled:T}={enabled:!0}){const{get:d}=(0,n.kY)(),{data:i,isError:u,isLoading:f}=(0,a.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:r}}=await d("/admin/license-limit-information");return r},{enabled:T}),o=e.useMemo(()=>i??{},[i]),s=e.useCallback(r=>(o?.features??[]).find(E=>E.name===r)?.options??{},[o?.features]);return{license:o,getFeature:s,isError:u,isLoading:f}}},27187:function(p,c,t){t.d(c,{eJ:function(){return W},lx:function(){return A},h4:function(){return w},fC:function(){return I}});var e=t(32735),n=t(99226),a=t(95162),m=t(56932),T=t(64092),d=t(96192),i=t(70788),u=t(67879),f=t(61575),o=t(2121),s=t(84642),r=t(8365),O=t(91917),E=t(60216),l=t.n(E),L=t(8471);const D=(0,L.ZP)(s.k)`
  svg path {
    fill: ${({theme:y})=>y.colors.neutral600};
  }
`;function C({name:y}){return e.createElement(s.k,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:(0,d.Q1)(300)},e.createElement(D,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6},e.createElement(O.Z,{width:`${8/16}rem`})),e.createElement(r.Z,{fontWeight:"bold"},y))}C.propTypes={name:l().string.isRequired};function S({type:y,item:h}){switch(y){case o.uL.STAGE:return e.createElement(C,{...h});default:return null}}function A(){return e.createElement(f.r,{renderItem:S})}function I({children:y}){return e.createElement(n.A,null,e.createElement(a.o,{tabIndex:-1},e.createElement(m.D,null,y)))}function W({href:y}){const{formatMessage:h}=(0,u.Z)();return e.createElement(d.rU,{startIcon:e.createElement(i.Z,null),to:y},h({id:"global.back",defaultMessage:"Back"}))}function w({title:y,subtitle:h,navigationAction:R,primaryAction:M}){return e.createElement(e.Fragment,null,e.createElement(d.SL,{name:y}),e.createElement(T.T,{navigationAction:R,primaryAction:M,title:y,subtitle:h}))}},90562:function(p,c,t){t.d(c,{uT:function(){return S},fC:function(){return W},Dx:function(){return C}});var e=t(32735),n=t(8365),a=t(84642),m=t(21223),T=t(87674),d=t(77981),i=t(14763),u=t(90431),f=t(98610),o=t(60216),s=t.n(o),r=t(67879),O=t(8471),E=t.p+"0cd5f8915b265d5b1856.png";const l="limits-title",L="https://strapi.io/pricing-cloud",D="https://strapi.io/contact-sales";function C({children:w}){return e.createElement(n.Z,{variant:"alpha",id:l},w)}C.propTypes={children:s().node.isRequired};function S({children:w}){return e.createElement(n.Z,{variant:"omega"},w)}S.propTypes={children:s().node.isRequired};function A(){const{formatMessage:w}=(0,r.Z)();return e.createElement(a.k,{gap:2,paddingTop:4},e.createElement(u.Q,{variant:"default",isExternal:!0,href:L},w({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),e.createElement(u.Q,{variant:"tertiary",isExternal:!0,href:D},w({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const I=O.ZP.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:w})=>`-${w.spaces[7]}`};
  margin-top: ${({theme:w})=>`-${w.spaces[7]}`};
  width: 360px;
`;function W({children:w,isOpen:y,onClose:h}){const{formatMessage:R}=(0,r.Z)();return y?e.createElement(m.P,{labelledBy:l},e.createElement(T.f,null,e.createElement(a.k,{gap:2,paddingLeft:7,position:"relative"},e.createElement(a.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},w,e.createElement(A,null)),e.createElement(a.k,{justifyContent:"end",height:"100%",width:"40%"},e.createElement(I,{src:E,"aria-hidden":!0,alt:"",loading:"lazy"}),e.createElement(d.x,{display:"flex",position:"absolute",right:0,top:0},e.createElement(i.h,{icon:e.createElement(f.Z,null),"aria-label":R({id:"global.close",defaultMessage:"Close"}),onClick:h})))))):null}W.defaultProps={isOpen:!1},W.propTypes={children:s().node.isRequired,isOpen:s().bool,onClose:s().func.isRequired}},2121:function(p,c,t){t.d(c,{$k:function(){return E},Ef:function(){return S},FT:function(){return D},Nj:function(){return r},Ot:function(){return o},QM:function(){return u},VS:function(){return l},_X:function(){return A},bc:function(){return s},gu:function(){return a},k_:function(){return O},lv:function(){return L},qZ:function(){return i},rg:function(){return T},sN:function(){return n},uL:function(){return C},x4:function(){return f},yq:function(){return m},zn:function(){return d}});var e=t(41865);const n="settings_review-workflows",a="Settings/Review_Workflows/RESET_WORKFLOW",m="Settings/Review_Workflows/SET_CONTENT_TYPES",T="Settings/Review_Workflows/SET_IS_LOADING",d="Settings/Review_Workflows/SET_ROLES",i="Settings/Review_Workflows/SET_WORKFLOW",u="Settings/Review_Workflows/SET_WORKFLOWS",f="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",o="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",s="Settings/Review_Workflows/WORKFLOW_CLONE_STAGE",r="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",O="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGES",E="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",l="Settings/Review_Workflows/WORKFLOW_UPDATE",L={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},D=e.W.colors.primary600,C={STAGE:"stage"},S="numberOfWorkflows",A="stagesPerWorkflow"},32329:function(p,c,t){t.d(c,{n:function(){return m}});var e=t(32735),n=t(96192),a=t(20108);function m(T={}){const{get:d}=(0,n.kY)(),{id:i="",...u}=T,f={populate:"stages"},{data:o,isLoading:s,status:r,refetch:O}=(0,a.useQuery)(["review-workflows","workflows",i],async()=>(await d(`/admin/review-workflows/workflows/${i}`,{params:{...f,...u}})).data),E=e.useMemo(()=>i&&o?.data?[o.data]:Array.isArray(o?.data)?o.data:[],[o?.data,i]);return{meta:e.useMemo(()=>o?.meta??{},[o?.meta]),workflows:E,isLoading:s,status:r,refetch:O}}},32033:function(p,c,t){t.r(c),t.d(c,{default:function(){return X}});var e=t(32735),n=t(96192),a=t(40986),m=t(30305),T=t(84642),d=t(35547),i=t(23699),u=t(22116),f=t(41013),o=t(45037),s=t(27947),r=t(8365),O=t(99320),E=t(1690),l=t(14763),L=t(82064),D=t(63318),C=t(94997),S=t(67879),A=t(20108),I=t(53038),W=t(8471),w=t(80006),y=t(98866),h=t(27187),R=t(90562),M=t(2121),Y=t(32329);const V=(0,W.ZP)(n.rU)`
  align-items: center;
  height: ${(0,n.Q1)(32)};
  display: flex;
  justify-content: center;
  padding: ${({theme:g})=>`${g.spaces[2]}}`};
  width: ${(0,n.Q1)(32)};

  svg {
    height: ${(0,n.Q1)(12)};
    width: ${(0,n.Q1)(12)};

    path {
      fill: ${({theme:g})=>g.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:g})=>g.colors.neutral800};
      }
    }
  }
`;function z(){const{formatMessage:g}=(0,S.Z)(),{push:F}=(0,I.k6)(),{collectionTypes:J,singleTypes:b,isLoading:_}=(0,w.G)(),{meta:x,workflows:j,isLoading:K,refetch:q}=(0,Y.n)(),[Z,k]=e.useState(null),[ee,B]=e.useState(!1),{del:te}=(0,n.kY)(),{formatAPIError:ne}=(0,n.So)(),$=(0,n.lm)(),{getFeature:oe,isLoading:G}=(0,y.q)(),{trackUsage:Q}=(0,n.rS)(),se=(0,a.v9)(m._),{allowedActions:{canCreate:H,canDelete:ae}}=(0,n.ss)(se.settings["review-workflows"]),P=oe("review-workflows"),{mutateAsync:re,isLoading:le}=(0,A.useMutation)(async({workflowId:v,stages:N})=>{const{data:{data:U}}=await te(`/admin/review-workflows/workflows/${v}`,{data:N});return U},{onSuccess(){$({type:"success",message:{id:"notification.success.deleted",defaultMessage:"Deleted"}})}}),ie=v=>[...J,...b].find(U=>U.uid===v).info.displayName,ce=v=>{k(v)},ue=()=>{k(null)},de=async()=>{try{const v=await re({workflowId:Z});return await q(),k(null),v}catch(v){return $({type:"warning",message:ne(v)}),null}};return e.useEffect(()=>{!K&&!G&&P?.[M.Ef]&&x?.workflowCount>parseInt(P[M.Ef],10)&&B(!0)},[G,K,P,x?.workflowCount,x.workflowsTotal]),e.createElement(e.Fragment,null,e.createElement(h.h4,{primaryAction:H&&e.createElement(n.Qj,{startIcon:e.createElement(L.Z,null),size:"S",to:"/settings/review-workflows/create",onClick:v=>{P?.[M.Ef]&&x?.workflowCount>=parseInt(P[M.Ef],10)?(v.preventDefault(),B(!0)):Q("willCreateWorkflow")}},g({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),subtitle:g({id:"Settings.review-workflows.list.page.subtitle",defaultMessage:"Manage your content review process"}),title:g({id:"Settings.review-workflows.list.page.title",defaultMessage:"Review Workflows"})}),e.createElement(h.fC,null,K||_?e.createElement(T.k,{justifyContent:"center"},e.createElement(d.a,null,g({id:"Settings.review-workflows.page.list.isLoading",defaultMessage:"Workflows are loading"}))):e.createElement(i.i,{colCount:3,footer:H&&e.createElement(u.c,{icon:e.createElement(L.Z,null),onClick:()=>{P?.[M.Ef]&&x?.workflowCount>=parseInt(P[M.Ef],10)?B(!0):(F("/settings/review-workflows/create"),Q("willCreateWorkflow"))}},g({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),rowCount:1},e.createElement(f.h,null,e.createElement(o.Tr,null,e.createElement(s.Th,null,e.createElement(r.Z,{variant:"sigma"},g({id:"Settings.review-workflows.list.page.list.column.name.title",defaultMessage:"Name"}))),e.createElement(s.Th,null,e.createElement(r.Z,{variant:"sigma"},g({id:"Settings.review-workflows.list.page.list.column.stages.title",defaultMessage:"Stages"}))),e.createElement(s.Th,null,e.createElement(r.Z,{variant:"sigma"},g({id:"Settings.review-workflows.list.page.list.column.contentTypes.title",defaultMessage:"Content Types"}))),e.createElement(s.Th,null,e.createElement(O.T,null,g({id:"Settings.review-workflows.list.page.list.column.actions.title",defaultMessage:"Actions"}))))),e.createElement(E.p,null,j.map(v=>e.createElement(o.Tr,{...(0,n.X7)({fn(N){N.target.nodeName!=="BUTTON"&&F(`/settings/review-workflows/${v.id}`)}}),key:`workflow-${v.id}`},e.createElement(s.Td,{width:(0,n.Q1)(250)},e.createElement(r.Z,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0},v.name)),e.createElement(s.Td,null,e.createElement(r.Z,{textColor:"neutral800"},v.stages.length)),e.createElement(s.Td,null,e.createElement(r.Z,{textColor:"neutral800"},(v?.contentTypes??[]).map(ie).join(", "))),e.createElement(s.Td,null,e.createElement(T.k,{alignItems:"center",justifyContent:"end"},e.createElement(V,{to:`/settings/review-workflows/${v.id}`,"aria-label":g({id:"Settings.review-workflows.list.page.list.column.actions.edit.label",defaultMessage:"Edit {name}"},{name:v.name})},e.createElement(D.Z,null)),j.length>1&&ae&&e.createElement(l.h,{"aria-label":g({id:"Settings.review-workflows.list.page.list.column.actions.delete.label",defaultMessage:"Delete {name}"},{name:"Default workflow"}),icon:e.createElement(C.Z,null),noBorder:!0,onClick:()=>{ce(v.id)}}))))))),e.createElement(n.QH,{bodyText:{id:"Settings.review-workflows.list.page.delete.confirm.body",defaultMessage:"If you remove this worfklow, all stage-related information will be removed for this content-type. Are you sure you want to remove it?"},isConfirmButtonLoading:le,isOpen:!!Z,onToggleDialog:ue,onConfirm:de}),e.createElement(R.fC,{isOpen:ee,onClose:()=>B(!1)},e.createElement(R.Dx,null,g({id:"Settings.review-workflows.list.page.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),e.createElement(R.uT,null,g({id:"Settings.review-workflows.list.page.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."})))))}function X(){const g=(0,a.v9)(m._);return e.createElement(n.O4,{permissions:g.settings["review-workflows"].main},e.createElement(z,null))}},22116:function(p,c,t){t.d(c,{c:function(){return f}});var e=t(74512),n=t(8471),a=t(77981),m=t(2775),T=t(84642),d=t(8365);const i=(0,n.ZP)(a.x)`
  height: ${24/16}rem;
  width: ${24/16}rem;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;

  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
  }

  svg path {
    fill: ${({theme:o})=>o.colors.primary600};
  }
`,u=(0,n.ZP)(a.x)`
  border-radius: 0 0 ${({theme:o})=>o.borderRadius} ${({theme:o})=>o.borderRadius};
  display: block;
  width: 100%;
  border: none;
`,f=({children:o,icon:s,...r})=>(0,e.jsxs)("div",{children:[(0,e.jsx)(m.i,{}),(0,e.jsx)(u,{as:"button",background:"primary100",padding:5,...r,children:(0,e.jsxs)(T.k,{children:[(0,e.jsx)(i,{"aria-hidden":!0,background:"primary200",children:s}),(0,e.jsx)(a.x,{paddingLeft:3,children:(0,e.jsx)(d.Z,{variant:"pi",fontWeight:"bold",textColor:"primary600",children:o})})]})})]})},70788:function(p,c,t){t.d(c,{Z:function(){return a}});var e=t(74512);const n=m=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...m,children:(0,e.jsx)("path",{fill:"#212134",d:"M24 13.3a.2.2 0 0 1-.2.2H5.74l8.239 8.239a.2.2 0 0 1 0 .282L12.14 23.86a.2.2 0 0 1-.282 0L.14 12.14a.2.2 0 0 1 0-.282L11.86.14a.2.2 0 0 1 .282 0L13.98 1.98a.2.2 0 0 1 0 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6Z"})}),a=n},59177:function(p,c,t){t.d(c,{d7:function(){return a}});var e=t(84306);const{Axios:n,AxiosError:a,CanceledError:m,isCancel:T,CancelToken:d,VERSION:i,all:u,Cancel:f,isAxiosError:o,spread:s,toFormData:r,AxiosHeaders:O,HttpStatusCode:E,formToJSON:l,getAdapter:L,mergeConfig:D}=e.default}}]);
