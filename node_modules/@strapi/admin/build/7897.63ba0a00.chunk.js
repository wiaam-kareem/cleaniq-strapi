"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[7897],{4468:function(G,u,t){t.d(u,{I:function(){return e},U:function(){return n}});const e="strapi_stage",n="strapi_assignee"},8291:function(G,u,t){t.r(u),t.d(u,{InformationBoxEE:function(){return ee}});var e=t(32735),n=t(96192),l=t(98865),v=t(750),s=t(84642),T=t(70843),d=t(8241),i=t(67879),g=t(20108),A=t(40986),m=t(69997),S=t(62089),M=t(30305),a=t(4468);function N(){const{initialData:f,layout:{uid:W},isSingleType:C,onChange:K}=(0,n.Wq)(),$=(0,A.v9)(M._),{formatMessage:r}=(0,i.Z)(),{formatAPIError:Y}=(0,n.So)(),p=(0,n.lm)(),{put:Z}=(0,n.kY)(),{allowedActions:{canReadUsers:w},isLoading:R}=(0,n.ss)({readUsers:$.settings.users.read}),{users:U,isLoading:F,isError:H}=(0,S.R)({},{enabled:!R&&w}),I=f?.[a.U]??null,L=async({value:c})=>{E.mutate({entityId:f.id,assigneeId:parseInt(c,10),uid:W})},E=(0,g.useMutation)(async({entityId:c,assigneeId:z,uid:J})=>{const h=C?"single-types":"collection-types",{data:{data:y}}=await Z(`/admin/content-manager/${h}/${J}/${c}/assignee`,{data:{id:z}});return K({target:{name:a.U,value:y[a.U]}},!0),y},{onSuccess(){p({type:"success",message:{id:"content-manager.reviewWorkflows.assignee.notification.saved",defaultMessage:"Assignee updated"}})}});return e.createElement(v.g,{name:a.U,id:a.U},e.createElement(s.k,{direction:"column",gap:2,alignItems:"stretch"},e.createElement(T.hQ,{clearLabel:r({id:"content-manager.reviewWorkflows.assignee.clear",defaultMessage:"Clear assignee"}),error:H&&w&&r({id:"content-manager.reviewWorkflows.assignee.error",defaultMessage:"An error occurred while fetching users"})||E.error&&Y(E.error),disabled:!R&&!F&&U.length===0,name:a.U,id:a.U,value:I?I.id:null,onChange:c=>L({value:c}),onClear:()=>L({value:null}),placeholder:r({id:"content-manager.reviewWorkflows.assignee.placeholder",defaultMessage:"Select \u2026"}),label:r({id:"content-manager.reviewWorkflows.assignee.label",defaultMessage:"Assignee"}),loading:F||R||E.isLoading},U.map(c=>e.createElement(d.O,{key:c.id,value:c.id,textValue:(0,m.Gf)(c,r)},(0,m.Gf)(c,r))))))}var k=t(4987),B=t(8365),D=t(35547),P=t(74925),x=t(15667),b=t(98866),O=t(90562),o=t(2121);function V({id:f,layout:W}={},C={}){const{kind:K,uid:$}=W,r=K==="collectionType"?"collection-types":"single-types",{get:Y}=(0,n.kY)(),{data:p,isLoading:Z,refetch:w}=(0,g.useQuery)(["content-manager",r,W.uid,f,"stages"],async()=>{const{data:F}=await Y(`/admin/content-manager/${r}/${$}/${f}/stages`);return F},C),R=e.useMemo(()=>p?.meta??{},[p?.meta]),U=e.useMemo(()=>p?.data??[],[p?.data]);return{meta:R,stages:U,isLoading:Z,refetch:w}}var j=t(68886);function X(){const{initialData:f,layout:W,isSingleType:C,onChange:K}=(0,n.Wq)(),{put:$}=(0,n.kY)(),{formatMessage:r}=(0,i.Z)(),{formatAPIError:Y}=(0,n.So)(),p=(0,n.lm)(),{meta:Z,stages:w,isLoading:R,refetch:U}=V({id:f.id,layout:W},{enabled:!!f?.id}),{getFeature:F}=(0,b.q)(),[H,I]=e.useState(!1),L=F("review-workflows"),E=f?.[a.I]??null,c=(0,g.useMutation)(async({entityId:h,stageId:y,uid:Q})=>{const q=C?"single-types":"collection-types",{data:{data:_}}=await $(`/admin/content-manager/${q}/${Q}/${h}/stage`,{data:{id:y}});return K({target:{name:a.I,value:_[a.I]}},!0),await U(),_},{onSuccess(){p({type:"success",message:{id:"content-manager.reviewWorkflows.stage.notification.saved",defaultMessage:"Review stage updated"}})}}),z=async({value:h})=>{try{L?.[o.Ef]&&parseInt(L[o.Ef],10)<Z.workflowCount?I("workflow"):L?.[o._X]&&parseInt(L[o._X],10)<w.length?I("stage"):c.mutateAsync({entityId:f.id,stageId:h,uid:W.uid})}catch{}},{themeColorName:J}=E?.color?(0,j.k)(E?.color):{};return e.createElement(e.Fragment,null,e.createElement(v.g,{hint:w.length===0&&r({id:"content-manager.reviewWorkflows.stages.no-transition",defaultMessage:"You don\u2019t have the permission to update this stage."}),name:a.I,id:a.I},e.createElement(s.k,{direction:"column",gap:2,alignItems:"stretch"},e.createElement(k.q4,{disabled:w.length===0,error:c.error&&Y(c.error)||null,name:a.I,id:a.I,value:E?.id,onChange:h=>z({value:h}),label:r({id:"content-manager.reviewWorkflows.stage.label",defaultMessage:"Review stage"}),startIcon:E&&e.createElement(s.k,{as:"span",height:2,background:E?.color,borderColor:J==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2,marginRight:"-3px"}),customizeContent:()=>e.createElement(s.k,{as:"span",justifyContent:"space-between",alignItems:"center",width:"100%"},e.createElement(B.Z,{textColor:"neutral800",ellipsis:!0},E?.name??""),R?e.createElement(D.a,{small:!0,style:{display:"flex"},"data-testid":"loader"}):null)},w.map(({id:h,color:y,name:Q})=>{const{themeColorName:q}=(0,j.k)(y);return e.createElement(k.ag,{key:h,startIcon:e.createElement(s.k,{height:2,background:y,borderColor:q==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),value:h,textValue:Q},Q)})),e.createElement(P.J,null),e.createElement(x.c,null))),e.createElement(O.fC,{isOpen:H==="workflow",onClose:()=>I(!1)},e.createElement(O.Dx,null,r({id:"content-manager.reviewWorkflows.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),e.createElement(O.uT,null,r({id:"content-manager.reviewWorkflows.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."}))),e.createElement(O.fC,{isOpen:H==="stage",onClose:()=>I(!1)},e.createElement(O.Dx,null,r({id:"content-manager.reviewWorkflows.stages.limit.title",defaultMessage:"You have reached the limit of stages for this workflow in your plan"})),e.createElement(O.uT,null,r({id:"content-manager.reviewWorkflows.stages.limit.body",defaultMessage:"Try deleting some stages or contact Sales to enable more stages."}))))}function ee(){const{isCreatingEntry:f,layout:{options:W}}=(0,n.Wq)(),C=W?.reviewWorkflows??!1;return e.createElement(l.d.Root,null,e.createElement(l.d.Title,null),C&&!f&&e.createElement(e.Fragment,null,e.createElement(X,null),e.createElement(N,null)),e.createElement(l.d.Body,null))}},98866:function(G,u,t){t.d(u,{q:function(){return v}});var e=t(32735),n=t(96192),l=t(20108);function v({enabled:s}={enabled:!0}){const{get:T}=(0,n.kY)(),{data:d,isError:i,isLoading:g}=(0,l.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:S}}=await T("/admin/license-limit-information");return S},{enabled:s}),A=e.useMemo(()=>d??{},[d]),m=e.useCallback(S=>(A?.features??[]).find(a=>a.name===S)?.options??{},[A?.features]);return{license:A,getFeature:m,isError:i,isLoading:g}}},90562:function(G,u,t){t.d(u,{uT:function(){return P},fC:function(){return O},Dx:function(){return D}});var e=t(32735),n=t(8365),l=t(84642),v=t(21223),s=t(87674),T=t(77981),d=t(14763),i=t(90431),g=t(98610),A=t(60216),m=t.n(A),S=t(67879),M=t(8471),a=t.p+"0cd5f8915b265d5b1856.png";const N="limits-title",k="https://strapi.io/pricing-cloud",B="https://strapi.io/contact-sales";function D({children:o}){return e.createElement(n.Z,{variant:"alpha",id:N},o)}D.propTypes={children:m().node.isRequired};function P({children:o}){return e.createElement(n.Z,{variant:"omega"},o)}P.propTypes={children:m().node.isRequired};function x(){const{formatMessage:o}=(0,S.Z)();return e.createElement(l.k,{gap:2,paddingTop:4},e.createElement(i.Q,{variant:"default",isExternal:!0,href:k},o({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),e.createElement(i.Q,{variant:"tertiary",isExternal:!0,href:B},o({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const b=M.ZP.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:o})=>`-${o.spaces[7]}`};
  margin-top: ${({theme:o})=>`-${o.spaces[7]}`};
  width: 360px;
`;function O({children:o,isOpen:V,onClose:j}){const{formatMessage:X}=(0,S.Z)();return V?e.createElement(v.P,{labelledBy:N},e.createElement(s.f,null,e.createElement(l.k,{gap:2,paddingLeft:7,position:"relative"},e.createElement(l.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},o,e.createElement(x,null)),e.createElement(l.k,{justifyContent:"end",height:"100%",width:"40%"},e.createElement(b,{src:a,"aria-hidden":!0,alt:"",loading:"lazy"}),e.createElement(T.x,{display:"flex",position:"absolute",right:0,top:0},e.createElement(d.h,{icon:e.createElement(g.Z,null),"aria-label":X({id:"global.close",defaultMessage:"Close"}),onClick:j})))))):null}O.defaultProps={isOpen:!1},O.propTypes={children:m().node.isRequired,isOpen:m().bool,onClose:m().func.isRequired}},2121:function(G,u,t){t.d(u,{$k:function(){return a},Ef:function(){return P},FT:function(){return B},Nj:function(){return S},Ot:function(){return A},QM:function(){return i},VS:function(){return N},_X:function(){return x},bc:function(){return m},gu:function(){return l},k_:function(){return M},lv:function(){return k},qZ:function(){return d},rg:function(){return s},sN:function(){return n},uL:function(){return D},x4:function(){return g},yq:function(){return v},zn:function(){return T}});var e=t(41865);const n="settings_review-workflows",l="Settings/Review_Workflows/RESET_WORKFLOW",v="Settings/Review_Workflows/SET_CONTENT_TYPES",s="Settings/Review_Workflows/SET_IS_LOADING",T="Settings/Review_Workflows/SET_ROLES",d="Settings/Review_Workflows/SET_WORKFLOW",i="Settings/Review_Workflows/SET_WORKFLOWS",g="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",A="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",m="Settings/Review_Workflows/WORKFLOW_CLONE_STAGE",S="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",M="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGES",a="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",N="Settings/Review_Workflows/WORKFLOW_UPDATE",k={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},B=e.W.colors.primary600,D={STAGE:"stage"},P="numberOfWorkflows",x="stagesPerWorkflow"},68886:function(G,u,t){t.d(u,{k:function(){return l},s:function(){return v}});var e=t(41865),n=t(2121);function l(s){if(!s)return null;const d=Object.entries(e.W.colors).filter(([,i])=>i.toUpperCase()===s.toUpperCase()).reduce((i,[g])=>(n.lv?.[g]&&(i=g),i),null);return d?{themeColorName:d,name:n.lv[d]}:null}function v(){return Object.entries(n.lv).map(([s,T])=>({hex:e.W.colors[s].toUpperCase(),name:T}))}}}]);
