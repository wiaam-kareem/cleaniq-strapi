(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[5895],{25466:function(rt,q,t){"use strict";t.d(q,{G:function(){return a},T:function(){return U}});var e=t(32735),T=t(96192),h=t(9086),_=t.n(h),x=t(83923),dt=(r,m)=>({...r,fieldsToPick:m}),et=t(97889),nt=t(88423),K=t.n(nt),ot=t(3040),at=t.n(ot),ct=t(56236),mt=t.n(ct);const st={fieldsToPick:[],formErrors:{},initialData:{},isLoading:!0,modifiedData:{},showHeaderButtonLoader:!1,showHeaderLoader:!0},ut=(r,m)=>(0,et.ZP)(r,c=>{switch(m.type){case"GET_DATA_SUCCEEDED":{c.isLoading=!1,c.showHeaderLoader=!1,c.initialData=K()(m.data,r.fieldsToPick),c.modifiedData=K()(m.data,r.fieldsToPick);break}case"ON_CANCEL":{c.modifiedData=r.initialData,c.formErrors={};break}case"ON_CHANGE":{m.inputType==="password"&&!m.value?mt()(c.modifiedData,m.keys.split(".")):m.keys.includes("username")&&!m.value?at()(c.modifiedData,m.keys.split("."),null):at()(c.modifiedData,m.keys.split("."),m.value);break}case"ON_SUBMIT":{c.showHeaderButtonLoader=!0;break}case"ON_SUBMIT_SUCCEEDED":{c.initialData=K()(m.data,r.fieldsToPick),c.modifiedData=K()(m.data,r.fieldsToPick),c.showHeaderButtonLoader=!1;break}case"SET_ERRORS":{c.formErrors=m.errors,c.showHeaderButtonLoader=!1;break}default:return c}}),gt=async(r,m)=>{let c=null;try{await m.validate(r,{abortEarly:!1})}catch(z){c=(0,T.CJ)(z)}return c};var a=(r,m,c,z)=>{const[{formErrors:J,initialData:Z,isLoading:H,modifiedData:B,showHeaderButtonLoader:j,showHeaderLoader:W},E]=(0,e.useReducer)(ut,st,()=>dt(st,z)),p=(0,T.lm)(),{lockApp:I,unlockApp:Q}=(0,T.o1)(),{get:Y,put:b}=(0,T.kY)();return(0,e.useEffect)(()=>{r&&(async()=>{try{const{data:{data:M}}=await Y(r);E({type:"GET_DATA_SUCCEEDED",data:M,fieldsToPick:z})}catch(M){console.error(M.response),p({type:"warning",message:{id:"notification.error"}})}})()},[r]),[{formErrors:J,initialData:Z,isLoading:H,modifiedData:B,showHeaderButtonLoader:j,showHeaderLoader:W},E,{handleCancel:()=>{E({type:"ON_CANCEL"})},handleChange:({target:{name:O,value:M,type:y}})=>{E({type:"ON_CHANGE",inputType:y,keys:O,value:M})},handleSubmit:async O=>{O.preventDefault();const M=await gt(B,m);if(E({type:"SET_ERRORS",errors:M||{}}),!M)try{I(),E({type:"ON_SUBMIT"});const y=_()(B,["confirmPassword","registrationToken"]);y.roles&&(y.roles=y.roles.map(k=>k.id)),y.ssoLockedRoles&&(y.ssoLockedRoles=[...new Set(y.ssoLockedRoles)]);const{data:{data:R}}=await b(r,y);c(R),E({type:"ON_SUBMIT_SUCCEEDED",data:R}),p({type:"success",message:{id:"notification.success.saved"}})}catch(y){const R=y?.response?.payload??{data:{}};R?.data&&typeof R.data=="string"?p({type:"warning",message:R.data}):p({type:"warning",message:R.message});const k=(0,x.I)(R);E({type:"SET_ERRORS",errors:k})}finally{Q()}},setField:(O,M)=>{E({type:"ON_CHANGE",keys:O,value:M})}}]},pt=t(40986),it=t(30305),ft=t(40957);const lt={global:[{intlLabel:{id:"Settings.application.title",defaultMessage:"Overview"},to:"/settings/application-infos",id:"000-application-infos",permissions:[]},{intlLabel:{id:"Settings.webhooks.title",defaultMessage:"Webhooks"},to:"/settings/webhooks",id:"webhooks"},{intlLabel:{id:"Settings.apiTokens.title",defaultMessage:"API Tokens"},to:"/settings/api-tokens?sort=name:ASC",id:"api-tokens"},{intlLabel:{id:"Settings.transferTokens.title",defaultMessage:"Transfer Tokens"},to:"/settings/transfer-tokens?sort=name:ASC",id:"transfer-tokens"},...!window.strapi.features.isEnabled(window.strapi.features.SSO)&&window.strapi?.flags?.promoteEE?[{intlLabel:{id:"Settings.sso.title",defaultMessage:"Single Sign-On"},to:"/settings/purchase-single-sign-on",id:"sso",lockIcon:!0}]:[],...!window.strapi.features.isEnabled(window.strapi.features.REVIEW_WORKFLOWS)&&window.strapi?.flags?.promoteEE?[{intlLabel:{id:"Settings.review-workflows.page.title",defaultMessage:"Review Workflows"},to:"/settings/purchase-review-workflows",id:"review-workflows",lockIcon:!0}]:[]],admin:[{intlLabel:{id:"global.roles",defaultMessage:"Roles"},to:"/settings/roles",id:"roles"},{intlLabel:{id:"global.users"},to:"/settings/users?pageSize=10&page=1&sort=firstname",id:"users"},...!window.strapi.features.isEnabled(window.strapi.features.AUDIT_LOGS)&&window.strapi?.flags?.promoteEE?[{intlLabel:{id:"global.auditLogs",defaultMessage:"Audit Logs"},to:"/settings/purchase-audit-logs",id:"auditLogs",lockIcon:!0}]:[]]};var ht=r=>r.map(m=>{const c=m.links.map(z=>({...z,isDisplayed:!1}));return{...m,links:c}}),Et=t(98978),vt=t.n(Et),P=r=>vt()(r,m=>m.id),U=()=>{const[{isLoading:r,menu:m},c]=(0,e.useState)({isLoading:!0,menu:[]}),{allPermissions:z}=(0,T.vn)(),{shouldUpdateStrapi:J}=(0,T.L7)(),{settings:Z}=(0,T.j1)(),H=(0,pt.v9)(it._),{global:B,admin:j}=(0,ft.c)(lt,async()=>(await t.e(918).then(t.bind(t,50918))).LINKS_EE,{combine(p,I){return{admin:[...I.admin,...p.admin],global:[...p.global,...I.global]}},defaultValue:{admin:[],global:[]}}),W=(0,e.useCallback)(p=>{if(!p.id)throw new Error("The settings menu item must have an id attribute.");return{...p,permissions:H.settings?.[p.id]?.main}},[H.settings]);(0,e.useEffect)(()=>{const p=async()=>{const tt=await(X=>Promise.all(X.reduce((V,w,O)=>{const M=y=>y.map(async(R,k)=>({hasPermission:await(0,T.qX)(z,R.permissions),sectionIndex:O,linkIndex:k}));return[...V,...M(w.links)]},[])))(Y);c(X=>({...X,isLoading:!1,menu:Y.map((V,w)=>({...V,links:V.links.map((O,M)=>{const y=tt.find(R=>R.sectionIndex===w&&R.linkIndex===M);return{...O,isDisplayed:Boolean(y.hasPermission)}})}))}))},{global:I,...Q}=Z,Y=ht([{...Z.global,links:P([...Z.global.links,...B.map(W)]).map(b=>({...b,hasNotification:b.id==="000-application-infos"&&J}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:j.map(W)},...Object.values(Q)]);p()},[j,B,z,Z,J,W]);const E=p=>({...p,links:p.links.filter(I=>I.isDisplayed)});return{isLoading:r,menu:m.map(E)}}},87211:function(rt,q,t){"use strict";t.r(q),t.d(q,{SettingsPage:function(){return Re}});var e=t(32735),T=t(99226),h=t(96192),_=t(74758),x=t(67879),$=t(53038),dt=t(25466),et=t(40957),nt=t(51374),K=t(45898),ot=t(18129),at=t(7141),ct=t(65352),mt=t(36473),st=t(88791),ut=t(89274),gt=t(36328),At=t(60216),a=t.n(At),pt=t(14911),it=t(8471);const ft=(0,it.ZP)(ot.J)`
  right: 15px;
  position: absolute;
`,lt=({menu:n})=>{const{formatMessage:o}=(0,x.Z)(),{trackUsage:i}=(0,h.rS)(),{pathname:s}=(0,$.TH)(),f=n.filter(d=>!d.links.every(l=>l.isDisplayed===!1)).map(d=>({...d,title:d.intlLabel,links:d.links.map(l=>({...l,title:l.intlLabel,name:l.id}))})),v=o({id:"global.settings",defaultMessage:"Settings"}),g=(d=null)=>{i("willNavigate",{from:s,to:d})};return e.createElement(at.m,{ariaLabel:v},e.createElement(ct.p,{label:v}),e.createElement(mt.Z,null,f.map(d=>e.createElement(st.D,{key:d.id,label:o(d.intlLabel)},d.links.map(l=>e.createElement(ut.E,{as:pt.OL,withBullet:l.hasNotification,to:l.to,onClick:()=>g(l.to),key:l.id},o(l.intlLabel),l?.lockIcon&&e.createElement(ft,{width:`${15/16}rem`,height:`${15/16}rem`,as:gt.Z})))))))};lt.propTypes={menu:a().array.isRequired};var Dt=lt;const ht=[{async Component(){return await t.e(3455).then(t.bind(t,32239))},to:"/settings/roles",exact:!0},{async Component(){return await Promise.all([t.e(2950),t.e(2544)]).then(t.bind(t,15570))},to:"/settings/roles/duplicate/:id",exact:!0},{async Component(){return await Promise.all([t.e(2950),t.e(2544)]).then(t.bind(t,15570))},to:"/settings/roles/new",exact:!0},{async Component(){return await Promise.all([t.e(2950),t.e(2544)]).then(t.bind(t,87056))},to:"/settings/roles/:id",exact:!0},{async Component(){return await t.e(5199).then(t.bind(t,25691))},to:"/settings/users",exact:!0},{async Component(){return await t.e(4263).then(t.bind(t,28363))},to:"/settings/users/:id",exact:!0},{async Component(){return await t.e(5162).then(t.bind(t,5722))},to:"/settings/webhooks/create",exact:!0},{async Component(){return await t.e(5162).then(t.bind(t,63939))},to:"/settings/webhooks/:id",exact:!0},{async Component(){return await t.e(4121).then(t.bind(t,80290))},to:"/settings/webhooks",exact:!0},{async Component(){return await t.e(8056).then(t.bind(t,22614))},to:"/settings/api-tokens",exact:!0},{async Component(){return await Promise.all([t.e(2950),t.e(570),t.e(1306),t.e(4299)]).then(t.bind(t,79494))},to:"/settings/api-tokens/create",exact:!0},{async Component(){return await Promise.all([t.e(2950),t.e(570),t.e(1306),t.e(92)]).then(t.bind(t,77238))},to:"/settings/api-tokens/:id",exact:!0},{async Component(){return await Promise.all([t.e(2950),t.e(570),t.e(1049),t.e(4816)]).then(t.bind(t,7360))},to:"/settings/transfer-tokens/create",exact:!0},{async Component(){return await t.e(9600).then(t.bind(t,51318))},to:"/settings/transfer-tokens",exact:!0},{async Component(){return await Promise.all([t.e(2950),t.e(570),t.e(1049),t.e(2492)]).then(t.bind(t,66523))},to:"/settings/transfer-tokens/:id",exact:!0},{async Component(){return await t.e(6090).then(t.bind(t,39655))},to:"/settings/purchase-audit-logs",exact:!0},{async Component(){return await t.e(7531).then(t.bind(t,67593))},to:"/settings/purchase-review-workflows",exact:!0},{async Component(){return await t.e(4486).then(t.bind(t,72787))},to:"/settings/purchase-single-sign-on",exact:!0}];var Et=t(95162),vt=t(35547),Ft=t(64092),P=t(91779),Pt=t(56932),U=t(84642),r=t(8365),m=t(10710),c=t(97037),z=t(84458),J=t(40501),Z=t(95441),H=t(20108),B=t(40986),j=t(60505),W=t(30305),E=t(77981);const p=750,I=100,Q=["image/jpeg","image/png","image/svg+xml"];var Y=t(84001),b=t(22765),tt=t(14763),X=t(92455),V=t(82064),w=t(69321),O=t(21223),M=t(98887),y=t(97889);const R={localImage:void 0};var Vt=(n=R,o)=>(0,y.ZP)(n,i=>{switch(o.type){case"SET_LOCAL_IMAGE":{i.localImage=o.value;break}default:return i}});const Lt=({onChangeLogo:n,customLogo:o,goTo:i,Component:s,modalTitle:u,next:f,prev:v,currentStep:g})=>{const[{localImage:d},l]=(0,e.useReducer)(Vt,R),{formatMessage:C}=(0,x.Z)(),L=D=>{l({type:"SET_LOCAL_IMAGE",value:D})},A=()=>{i(null)};return g?e.createElement(O.P,{labelledBy:"modal",onClose:A},e.createElement(M.x,null,e.createElement(r.Z,{fontWeight:"bold",as:"h2",id:"modal"},C(u))),e.createElement(s,{setLocalImage:L,goTo:i,next:f,prev:v,onClose:A,asset:d||o,onChangeLogo:n})):null};Lt.defaultProps={Component:void 0,currentStep:void 0,customLogo:void 0,modalTitle:void 0,next:null,prev:null},Lt.propTypes={Component:a().elementType,currentStep:a().string,customLogo:a().shape({name:a().string,url:a().string,width:a().number,height:a().number,ext:a().string}),goTo:a().func.isRequired,modalTitle:a().shape({id:a().string,defaultMessage:a().string}),next:a().string,onChangeLogo:a().func.isRequired,prev:a().string};var $t=Lt;const Ut={currentStep:void 0};var Kt=(n=Ut,o)=>(0,y.ZP)(n,i=>{switch(o.type){case"GO_TO":{i.currentStep=o.to;break}default:return i}}),Jt=t(49854),yt=t(89599),Qt=t(2775),St=t(8623),Yt=t(37561),Xt=t(750),wt=t(15667),Ct=t(74973),kt=t(9047);const qt={id:"Settings.application.customization.modal.upload.error-format",defaultMessage:"Wrong format uploaded (accepted formats only: jpeg, jpg, png, svg)."},Zt={id:"Settings.application.customization.modal.upload.error-size",defaultMessage:"The file uploaded is too large (max dimension: {dimension}x{dimension}, max file size: {size}KB)"},_t=n=>new Promise(o=>{const i=new FileReader;i.onload=()=>{const s=new Image;s.onload=function(){o({width:s.width,height:s.height})},s.src=i.result},i.readAsDataURL(n)}),te=(n,o)=>({ext:n.name.split(".").pop(),size:n.size/1e3,name:n.name,url:URL.createObjectURL(n),rawFile:n,width:o.width,height:o.height}),Nt=async n=>{let o;if(!Q.includes(n.type))throw o=new Error("File format"),o.displayMessage=qt,o;const s=await _t(n);if(!(s.width<=p&&s.height<=p))throw o=new Error("File sizing"),o.displayMessage=Zt,o;const f=te(n,s);if(!(f.size<=I))throw o=new Error("File sizing"),o.displayMessage=Zt,o;return f},ee=(0,it.ZP)(Yt._)`
  opacity: 0;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
`,Mt=({setLocalImage:n,goTo:o,next:i,onClose:s})=>{const{formatMessage:u}=(0,x.Z)(),[f,v]=(0,e.useState)(!1),[g,d]=(0,e.useState)(void 0),l=(0,e.useRef)(null),C=()=>v(!0),L=()=>v(!1),A=N=>{N.preventDefault(),l.current.click()},D=async()=>{L();const N=l.current.files[0];if(N)try{const G=await Nt(N);n(G),o(i)}catch(G){if(G.displayMessage)d(u(G.displayMessage,{size:I,dimension:p})),l.current.focus();else throw G}},F=()=>f?"primary500":g?"danger600":"neutral300";return e.createElement(e.Fragment,null,e.createElement("form",null,e.createElement(E.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(Xt.g,{name:"logo-upload",error:g},e.createElement("label",{htmlFor:"logo-upload"},e.createElement(U.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(U.k,{paddingTop:9,paddingBottom:7,hasRadius:!0,justifyContent:"center",direction:"column",background:f?"primary100":"neutral100",borderColor:F(),borderStyle:"dashed",borderWidth:"1px",position:"relative",onDragEnter:C,onDragLeave:L},e.createElement(ot.J,{color:"primary600",width:`${60/16}rem`,height:`${60/16}rem`,as:kt.Z,"aria-hidden":!0}),e.createElement(E.x,{paddingTop:3,paddingBottom:5},e.createElement(r.Z,{variant:"delta",as:"span"},u({id:"Settings.application.customization.modal.upload.drag-drop",defaultMessage:"Drag and Drop here or"}))),e.createElement(ee,{accept:Q,cursor:"pointer",as:"input",type:"file",name:"files",tabIndex:-1,zIndex:1,onChange:D,ref:l,id:"logo-upload"}),e.createElement(P.z,{type:"button",onClick:A},u({id:"Settings.application.customization.modal.upload.cta.browse",defaultMessage:"Browse files"})),e.createElement(E.x,{paddingTop:6},e.createElement(r.Z,{variant:"pi",textColor:"neutral600"},u({id:"Settings.application.customization.modal.upload.file-validation",defaultMessage:"Max dimension: {dimension}x{dimension}, Max size: {size}KB"},{size:I,dimension:p})))),e.createElement(wt.c,null)))))),e.createElement(Ct.m,{startActions:e.createElement(P.z,{onClick:s,variant:"tertiary"},u({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"}))}))};Mt.defaultProps={next:null},Mt.propTypes={goTo:a().func.isRequired,next:a().string,onClose:a().func.isRequired,setLocalImage:a().func.isRequired};var ne=Mt,oe=t(2846),ae=async n=>{try{const{get:o}=(0,h.tg)(),i=await o(n,{responseType:"blob",timeout:8e3});return new File([i.data],i.config.url,{type:i.headers["content-type"]})}catch(o){throw o.displayMessage={id:"Settings.application.customization.modal.upload.error-network",defaultMessage:"Network error"},o}};const Rt=({goTo:n,next:o,onClose:i,setLocalImage:s})=>{const{formatMessage:u}=(0,x.Z)(),[f,v]=(0,e.useState)(""),[g,d]=(0,e.useState)(null),l=L=>{v(L.target.value)},C=async()=>{try{const L=await ae(f),A=await Nt(L);s(A),n(o)}catch(L){if(L.displayMessage)d(u(L.displayMessage,{size:I,dimension:p}));else throw L}};return e.createElement("form",{onSubmit:L=>{L.preventDefault(),C()}},e.createElement(E.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(oe.o,{label:u({id:"Settings.application.customization.modal.upload.from-url.input-label",defaultMessage:"URL"}),error:g,onChange:l,value:f,name:"logo-url"})),e.createElement(Ct.m,{startActions:e.createElement(P.z,{onClick:i,variant:"tertiary"},u({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(P.z,{type:"submit"},u({id:"Settings.application.customization.modal.upload.next",defaultMessage:"Next"}))}))};Rt.defaultProps={next:null},Rt.propTypes={goTo:a().func.isRequired,next:a().string,onClose:a().func.isRequired,setLocalImage:a().func.isRequired};var se=Rt;const Tt=({setLocalImage:n,goTo:o,next:i,onClose:s})=>{const{formatMessage:u}=(0,x.Z)();return e.createElement(Jt.v,{label:u({id:"Settings.application.customization.modal.tab.label",defaultMessage:"How do you want to upload your assets?"}),variant:"simple"},e.createElement(E.x,{paddingLeft:8,paddingRight:8},e.createElement(yt.m,null,e.createElement(yt.O,null,u({id:"Settings.application.customization.modal.upload.from-computer",defaultMessage:"From computer"})),e.createElement(yt.O,null,u({id:"Settings.application.customization.modal.upload.from-url",defaultMessage:"From url"}))),e.createElement(Qt.i,null)),e.createElement(St.n,null,e.createElement(St.x,null,e.createElement(ne,{onClose:s,setLocalImage:n,goTo:o,next:i})),e.createElement(St.x,null,e.createElement(se,{onClose:s,setLocalImage:n,goTo:o,next:i}))))};Tt.defaultProps={next:null},Tt.propTypes={goTo:a().func.isRequired,next:a().string,onClose:a().func.isRequired,setLocalImage:a().func.isRequired};var ie=Tt,le=t(49758),re=t(92626),de=t(55454),ce=t(74030),me=t(11682),Bt=t(30659),ue=t(50162);const Gt=({asset:n})=>{const{formatMessage:o}=(0,x.Z)();return e.createElement(le.Z,null,e.createElement(re.O,null,e.createElement(de.H,{size:"S",src:n.url})),e.createElement(ce.e,null,e.createElement(me.a,null,e.createElement(Bt.l,null,n.name),e.createElement(Bt._,null,`${n.ext.toUpperCase()} - ${n.width}\u2715${n.height}`)),e.createElement(ue.E,null,o({id:"Settings.application.customization.modal.pending.card-badge",defaultMessage:"image"}))))};Gt.propTypes={asset:a().shape({name:a().string,url:a().string,width:a().number,height:a().number,ext:a().string}).isRequired};var ge=Gt;const xt=({onClose:n,asset:o,prev:i,next:s,goTo:u,setLocalImage:f,onChangeLogo:v})=>{const{formatMessage:g}=(0,x.Z)(),d=()=>{f(void 0),u(i)},l=()=>{v(o),u(s)};return e.createElement(e.Fragment,null,e.createElement(E.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(U.k,{justifyContent:"space-between",paddingBottom:6},e.createElement(U.k,{direction:"column",alignItems:"flex-start"},e.createElement(r.Z,{variant:"pi",fontWeight:"bold"},g({id:"Settings.application.customization.modal.pending.title",defaultMessage:"Logo ready to upload"})),e.createElement(r.Z,{variant:"pi",textColor:"neutral500"},g({id:"Settings.application.customization.modal.pending.subtitle",defaultMessage:"Manage the chosen logo before uploading it"}))),e.createElement(P.z,{onClick:d,variant:"secondary"},g({id:"Settings.application.customization.modal.pending.choose-another",defaultMessage:"Choose another logo"}))),e.createElement(E.x,{maxWidth:(0,h.Q1)(180)},o.url?e.createElement(ge,{asset:o}):null)),e.createElement(Ct.m,{startActions:e.createElement(P.z,{onClick:n,variant:"tertiary"},g({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(P.z,{onClick:l},g({id:"Settings.application.customization.modal.pending.upload",defaultMessage:"Upload logo"}))}))};xt.defaultProps={next:null,prev:null},xt.propTypes={goTo:a().func.isRequired,asset:a().shape({name:a().string,url:a().string,width:a().number,height:a().number,ext:a().string}).isRequired,next:a().string,onClose:a().func.isRequired,onChangeLogo:a().func.isRequired,prev:a().string,setLocalImage:a().func.isRequired};var pe=xt,fe={upload:{Component:ie,modalTitle:{id:"Settings.application.customization.modal.upload",defaultMessage:"Upload logo"},next:"pending",prev:null},pending:{Component:pe,modalTitle:{id:"Settings.application.customization.modal.pending",defaultMessage:"Pending logo"},next:null,prev:"upload"}};const It=({canUpdate:n,customLogo:o,defaultLogo:i,hint:s,label:u,onChangeLogo:f,onResetLogo:v})=>{const[{currentStep:g},d]=(0,e.useReducer)(Kt,Ut),{Component:l,next:C,prev:L,modalTitle:A}=fe[g]||{},{formatMessage:D}=(0,x.Z)(),F=N=>{d({type:"GO_TO",to:N})};return e.createElement(e.Fragment,null,e.createElement(Y.F,{label:u,selectedSlide:0,hint:s,previousLabel:"",nextLabel:"",onNext:()=>{},onPrevious:()=>{},secondaryLabel:o?.name||"logo.png",actions:e.createElement(b.b,null,e.createElement(tt.h,{disabled:!n,onClick:()=>F(o?"pending":"upload"),label:D({id:"Settings.application.customization.carousel.change-action",defaultMessage:"Change logo"}),icon:e.createElement(V.Z,null)}),o&&e.createElement(tt.h,{disabled:!n,onClick:v,label:D({id:"Settings.application.customization.carousel.reset-action",defaultMessage:"Reset logo"}),icon:e.createElement(w.Z,null)}))},e.createElement(X.q,{label:D({id:"Settings.application.customization.carousel-slide.label",defaultMessage:"Logo slide"})},e.createElement(E.x,{maxHeight:"40%",maxWidth:"40%",as:"img",src:o?.url||i,alt:D({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"})}))),e.createElement($t,{Component:l,currentStep:g,onChangeLogo:f,customLogo:o,goTo:F,next:C,prev:L,modalTitle:A}))};It.defaultProps={canUpdate:!1,customLogo:null,hint:null},It.propTypes={canUpdate:a().bool,customLogo:a().shape({url:a().string,name:a().string}),label:a().string.isRequired,hint:a().string,defaultLogo:a().string.isRequired,onChangeLogo:a().func.isRequired,onResetLogo:a().func.isRequired};var Ht=It,he=t(86349),Ee=t.n(he),ve=(n,o)=>Ee()(n,{menuLogo:{display:o.menuLogo},authLogo:{display:o.authLogo}});const zt={menuLogo:{display:null,submit:{rawFile:null,isReset:!1}},authLogo:{display:null,submit:{rawFile:null,isReset:!1}}};var Le=(n=zt,o)=>(0,y.ZP)(n,i=>{switch(o.type){case"SET_CUSTOM_MENU_LOGO":{i.menuLogo.display=o.value,i.menuLogo.submit.rawFile=o.value.rawFile;break}case"SET_CUSTOM_AUTH_LOGO":{i.authLogo.display=o.value,i.authLogo.submit.rawFile=o.value.rawFile;break}case"RESET_CUSTOM_MENU_LOGO":{i.menuLogo.display=null,i.menuLogo.submit={rawFile:null,isReset:!0};break}case"RESET_CUSTOM_AUTH_LOGO":{i.authLogo.display=null,i.authLogo.submit={rawFile:null,isReset:!0};break}default:return i}});const Ot=(0,e.forwardRef)(({canUpdate:n,projectSettingsStored:o},i)=>{const{formatMessage:s}=(0,x.Z)(),{trackUsage:u}=(0,h.rS)(),{logos:{menu:f,auth:v}}=(0,j.m)(),[{menuLogo:g,authLogo:d},l]=(0,e.useReducer)(Le,zt,()=>ve(zt,o)),C=F=>{l({type:"SET_CUSTOM_MENU_LOGO",value:F})},L=()=>{u("didClickResetLogo",{logo:"menu"}),l({type:"RESET_CUSTOM_MENU_LOGO"})},A=F=>{l({type:"SET_CUSTOM_AUTH_LOGO",value:F})},D=()=>{u("didClickResetLogo",{logo:"auth"}),l({type:"RESET_CUSTOM_AUTH_LOGO"})};return(0,e.useImperativeHandle)(i,()=>({getValues:()=>({menuLogo:g.submit,authLogo:d.submit})})),e.createElement(E.x,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(r.Z,{variant:"delta",as:"h3"},s({id:"Settings.application.customization",defaultMessage:"Customization"})),e.createElement(r.Z,{variant:"pi",textColor:"neutral600"},s({id:"Settings.application.customization.size-details",defaultMessage:"Max dimension: {dimension}\xD7{dimension}, Max file size: {size}KB"},{dimension:p,size:I})),e.createElement(m.r,{paddingTop:4,gap:4},e.createElement(c.P,{col:6,s:12},e.createElement(Ht,{canUpdate:n,customLogo:g.display,defaultLogo:f.default,hint:s({id:"Settings.application.customization.menu-logo.carousel-hint",defaultMessage:"Replace the logo in the main navigation"}),label:s({id:"Settings.application.customization.carousel.menu-logo.title",defaultMessage:"Menu logo"}),onChangeLogo:C,onResetLogo:L})),e.createElement(c.P,{col:6,s:12},e.createElement(Ht,{canUpdate:n,customLogo:d.display,defaultLogo:v.default,hint:s({id:"Settings.application.customization.auth-logo.carousel-hint",defaultMessage:"Replace the logo in the authentication pages"}),label:s({id:"Settings.application.customization.carousel.auth-logo.title",defaultMessage:"Auth logo"}),onChangeLogo:A,onResetLogo:D}))))});Ot.defaultProps={canUpdate:!1,projectSettingsStored:null},Ot.propTypes={canUpdate:a().bool,projectSettingsStored:a().shape({menuLogo:a().shape({url:a().string,name:a().string})})};var ye=Ot,Se=n=>{const o=new FormData;return Object.entries(n).forEach(([i,s])=>{s&&s.rawFile instanceof File&&o.append(i,s.rawFile),s&&s.isReset&&o.append(i,null)}),o};const Ce=()=>null;var Me=()=>{const n=e.useRef(),o=(0,h.lm)(),{trackUsage:i}=(0,h.rS)(),{formatMessage:s}=(0,x.Z)(),{get:u,post:f}=(0,h.kY)(),{updateProjectSettings:v}=(0,j.m)(),g=(0,B.v9)(W._),{formatAPIError:d}=(0,h.So)(),{communityEdition:l,latestStrapiReleaseTag:C,nodeVersion:L,shouldUpdateStrapi:A,strapiVersion:D}=(0,h.L7)(),F=(0,et.c)(Ce,async()=>(await t.e(502).then(t.bind(t,50502))).AdminSeatInfoEE),{allowedActions:{canRead:N,canUpdate:G}}=(0,h.ss)(g.settings["project-settings"]);(0,h.go)();const{data:jt,isLoading:Te}=(0,H.useQuery)(["project-settings"],async()=>{const{data:S}=await u("/admin/project-settings");return S},{cacheTime:0,enabled:N,select(S){return{...S,authLogo:S.authLogo?{...S.authLogo,url:(0,h.CR)(S.authLogo.url)}:S.authLogo,menuLogo:S.menuLogo?{...S.menuLogo,url:(0,h.CR)(S.menuLogo.url)}:S.menuLogo}}}),xe=(0,H.useMutation)(S=>f("/admin/project-settings",S,{headers:{"Content-Type":"multipart/form-data"}}),{onError(S){o({type:"warning",message:d(S)})},async onSuccess(S){const{menuLogo:Wt,authLogo:bt}=S;v({menuLogo:Wt?.url,authLogo:bt?.url}),Wt?.rawFile&&i("didChangeLogo",{logo:"menu"}),bt?.rawFile&&i("didChangeLogo",{logo:"auth"}),o({type:"success",message:s({id:"app",defaultMessage:"Saved"})})}}),Ie=S=>{S.preventDefault(),xe.mutate(Se(n.current.getValues()))};return F?e.createElement(T.A,null,e.createElement(h.SL,{name:"Application"}),e.createElement(Et.o,null,Te?e.createElement(vt.a,null,s({id:"Settings.application.isLoading",defaultMessage:"Loading"})):e.createElement("form",{onSubmit:Ie},e.createElement(Ft.T,{title:s({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:s({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"}),primaryAction:G&&e.createElement(P.z,{type:"submit",startIcon:e.createElement(J.Z,null)},s({id:"global.save",defaultMessage:"Save"}))}),e.createElement(Pt.D,null,e.createElement(U.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(U.k,{direction:"column",alignItems:"stretch",gap:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(r.Z,{variant:"delta",as:"h3"},s({id:"global.details",defaultMessage:"Details"})),e.createElement(m.r,{gap:5,as:"dl"},e.createElement(c.P,{col:6,s:12},e.createElement(r.Z,{variant:"sigma",textColor:"neutral600",as:"dt"},s({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})),e.createElement(U.k,{gap:3,direction:"column",alignItems:"start",as:"dd"},e.createElement(r.Z,null,"v",D),A&&e.createElement(z.r,{href:`https://github.com/strapi/strapi/releases/tag/${C}`,isExternal:!0,endIcon:e.createElement(Z.Z,null)},s({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"})))),e.createElement(c.P,{col:6,s:12},e.createElement(r.Z,{variant:"sigma",textColor:"neutral600",as:"dt"},s({id:"Settings.application.edition-title",defaultMessage:"current plan"})),e.createElement(U.k,{gap:3,direction:"column",alignItems:"start",as:"dd"},e.createElement(r.Z,null,s({id:"Settings.application.ee-or-ce",defaultMessage:"{communityEdition, select, true {Community Edition} other {Enterprise Edition}}"},{communityEdition:l})),e.createElement(z.r,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement(Z.Z,null)},s({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})))),e.createElement(c.P,{col:6,s:12},e.createElement(r.Z,{variant:"sigma",textColor:"neutral600",as:"dt"},s({id:"Settings.application.node-version",defaultMessage:"node version"})),e.createElement(r.Z,{as:"dd"},L)),e.createElement(F,null))),N&&jt&&e.createElement(ye,{canUpdate:G,ref:n,projectSettingsStored:jt})))))):null};function Re(){const{settingId:n}=(0,$.UO)(),{settings:o}=(0,h.j1)(),{formatMessage:i}=(0,x.Z)(),{isLoading:s,menu:u}=(0,dt.T)(),f=(0,et.c)(ht,async()=>(await t.e(3483).then(t.bind(t,11009))).ROUTES_EE,{combine(d,l){return[...d,...l]},defaultValue:[]}),v=e.useMemo(()=>(0,K.W)(f.map(({to:d,Component:l,exact:C})=>(0,nt.o)(l,d,C))),[f]),g=Object.values(o).flatMap(d=>{const{links:l}=d;return l.map(C=>(0,nt.o)(C.Component,C.to,C.exact||!1))});return s?e.createElement(h.dO,null):n?e.createElement(T.A,{sideNav:e.createElement(Dt,{menu:u})},e.createElement(_.q,{title:i({id:"global.settings",defaultMessage:"Settings"})}),e.createElement($.rs,null,e.createElement($.AW,{path:"/settings/application-infos",component:Me,exact:!0}),v,g)):e.createElement($.l_,{to:"/settings/application-infos"})}},56236:function(rt,q,t){var e=t(69386);function T(h,_){return h==null?!0:e(h,_)}rt.exports=T}}]);
