{"version":3,"file":"action.js","sources":["../../../../src/commands/actions/watch-admin/action.ts"],"sourcesContent":["import strapiAdmin from '@strapi/admin';\nimport { getConfigUrls, getAbsoluteServerUrl } from '@strapi/utils';\n\nimport { getEnabledPlugins } from '../../../core/loaders/plugins/get-enabled-plugins';\nimport addSlash from '../../../utils/addSlash';\nimport strapi from '../../../Strapi';\n\nexport default async ({ browser }: { browser: boolean }) => {\n  const appContext = await strapi.compile();\n\n  const strapiInstance = strapi({\n    ...appContext,\n    autoReload: true,\n    serveAdminPanel: false,\n  });\n\n  const plugins = await getEnabledPlugins(strapiInstance, { client: true });\n\n  const { adminPath } = getConfigUrls(strapiInstance.config, true);\n\n  const adminPort = strapiInstance.config.get('admin.port', 8000);\n  const adminHost = strapiInstance.config.get('admin.host', 'localhost');\n\n  const backendURL = getAbsoluteServerUrl(strapiInstance.config, true);\n\n  strapiAdmin.watchAdmin({\n    appDir: appContext.appDir,\n    buildDestDir: appContext.distDir,\n    plugins,\n    port: adminPort,\n    host: adminHost,\n    browser,\n    options: {\n      backend: backendURL,\n      adminPath: addSlash(adminPath),\n    },\n  });\n};\n"],"names":["strapi","getEnabledPlugins","getConfigUrls","getAbsoluteServerUrl","strapiAdmin"],"mappings":";;;;;;;;AAOA,MAAA,SAAe,OAAO,EAAE,QAAA,MAAoC;AACpD,QAAA,aAAa,MAAMA,OAAO;AAEhC,QAAM,iBAAiBA,OAAO;AAAA,IAC5B,GAAG;AAAA,IACH,YAAY;AAAA,IACZ,iBAAiB;AAAA,EAAA,CAClB;AAED,QAAM,UAAU,MAAMC,oCAAkB,gBAAgB,EAAE,QAAQ,MAAM;AAExE,QAAM,EAAE,UAAU,IAAIC,YAAAA,cAAc,eAAe,QAAQ,IAAI;AAE/D,QAAM,YAAY,eAAe,OAAO,IAAI,cAAc,GAAI;AAC9D,QAAM,YAAY,eAAe,OAAO,IAAI,cAAc,WAAW;AAErE,QAAM,aAAaC,YAAA,qBAAqB,eAAe,QAAQ,IAAI;AAEnEC,uBAAAA,QAAY,WAAW;AAAA,IACrB,QAAQ,WAAW;AAAA,IACnB,cAAc,WAAW;AAAA,IACzB;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN;AAAA,IACA,SAAS;AAAA,MACP,SAAS;AAAA,MACT,WAAW,SAAS,SAAS;AAAA,IAC/B;AAAA,EAAA,CACD;AACH;;"}